import{d as E,b as g,o as v,e as k}from"./web.56bfa28a.js";var p=n=>typeof n=="function"&&!n.length?n():n;function h(n,f,a){const c=new IntersectionObserver(f,a),l=t=>{c.observe(t)},o=t=>c.unobserve(t),i=()=>n.forEach(l),u=()=>c.disconnect(),e=()=>c.takeRecords().forEach(t=>o(t.target));return i(),v(u),{add:l,remove:o,start:i,stop:u,reset:e,instance:c}}function m(n,f){const a=new WeakMap,{add:c,remove:l}=h([],(e,t)=>{e.forEach(s=>a.get(s.target)?.(s,t))},n);function o(e){l(e),a.delete(e)}function i(e,t){c(e),a.set(e,t)}const u=f?(e,t)=>{const s=p(f);return b=>t(s(b,{visible:k(e)}))}:(e,t)=>s=>t(s.isIntersecting);return e=>{const[t,s]=E(n?.initialValue??!1),b=u(t,s);let r;return e&&!(e instanceof Element)?g(()=>{const d=e();d!==r&&(r&&o(r),d&&i(d,b),r=d)}):e&&i(e,b),v(()=>r&&o(r)),t}}export{m as c};
